<div class="event-scheduler-container">
  <div class="event-scheduler-hour-container">
    @for (hour of hours; track hour) {
      <div class="event-scheduler-hour">
        {{ timeToTimeString(hour, 0) }}
      </div>
    }
  </div>

  <div class="event-scheduler-minute-container" cdkDropListGroup>
    <div id="cdk-container" class="event-scheduler-minutes" cdkDropList [cdkDropListData]="timeSlots"
         (cdkDropListDropped)="drop($event)">
      @for (slot of timeSlots; track slot) {
        <div class="event-scheduler-time-slot" (click)="clickScheduleArea(slot)" cdkDrag cdkDragDisabled></div>
      }
    </div>
    @defer(when (events$ | async)) {
      @for (event of (events$ | async); track event;) {
        <div class="event-scheduler-event-slots" cdkDropList [cdkDropListData]="event"
             [cdkDropListEnterPredicate]="canDragEventEnter" [ngStyle]="defineStyle(event)">
          <!--        @if (!event.allDay) {-->
          <div #eventSlot="cdkDrag" class="event-scheduler-event-slot" cdkDragLockAxis="y" cdkDrag
               [class.pointer-events-none]="eventSlot._dragRef.isDragging()"
               (click)="clickScheduleArea(event, true)">
            @if(isLoading && updatedId === event.id) {
              <mat-spinner [diameter]="loaderSize"></mat-spinner>
            } @else {
              {{ event.title }}
            }
          </div>
          <div *cdkDragPreview class="event-scheduler-event-slot">
          </div>
        </div>
      }
    } @placeholder (minimum 1s) {
      <div class="huge-message">
        <mat-spinner [diameter]="180" [strokeWidth]="8"></mat-spinner>
      </div>
    }

    <div class="event-scheduler-allday-slot" (click)="clickScheduleArea()">
      @for (event of (allDayEvents$ | async); track event) {
        <span class="allday-label" (click)="clickScheduleArea(event, true); $event.stopPropagation()">{{ event.title }}</span>
      }
    </div>

  </div>
</div>

<!-- <div
class="event-scheduler-event-slot"
cdkDragLockAxis="y"
cdkDrag
(click)="clickEvent(event)">
{{ event.title }}
<div *cdkDragPreview class="event-scheduler-event-slot-preview">
  {{ event.title }}
</div>
</div>
</div> -->
